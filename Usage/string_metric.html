<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="rapidfuzz.utils" href="utils.html" /><link rel="prev" title="rapidfuzz.fuzz" href="fuzz.html" />

    <meta name="generator" content="sphinx-4.4.0, furo 2022.01.02"/>
        <title>rapidfuzz.string_metric - RapidFuzz 2.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=df49af52631e7917044a9c21a57f7b83170a6dd0" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=fade93df149f7c5fedb3ff897f799dc7d283b420" />
    
    


<style>
  body {
    --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
  }
  body[data-theme="dark"] {
    --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
  }
  @media (prefers-color-scheme: dark) {
    body:not([data-theme="light"]) {
      --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  
    }
  }
</style></head>
  <body>
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" />
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">RapidFuzz 2.0.0 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">RapidFuzz 2.0.0 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Installation.html">Installation</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">Usage</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="process.html">rapidfuzz.process</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="distance/index.html">distance</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="distance/Levenshtein.html">Levenshtein</a></li>
<li class="toctree-l3"><a class="reference internal" href="distance/Indel.html">Indel</a></li>
<li class="toctree-l3"><a class="reference internal" href="distance/Hamming.html">Hamming</a></li>
<li class="toctree-l3"><a class="reference internal" href="distance/Jaro.html">Jaro</a></li>
<li class="toctree-l3"><a class="reference internal" href="distance/JaroWinkler.html">JaroWinkler</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="fuzz.html">rapidfuzz.fuzz</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">rapidfuzz.string_metric</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.html">rapidfuzz.utils</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Contributing/index.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog_link.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../License.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../References.html">References</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/maxbachmann/RapidFuzz">GitHub Repository</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="rapidfuzz-string-metric">
<h1>rapidfuzz.string_metric<a class="headerlink" href="#rapidfuzz-string-metric" title="Permalink to this headline">¶</a></h1>
<section id="levenshtein">
<h2>levenshtein<a class="headerlink" href="#levenshtein" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="rapidfuzz.string_metric.levenshtein">
<span class="sig-prename descclassname"><span class="pre">rapidfuzz.string_metric.</span></span><span class="sig-name descname"><span class="pre">levenshtein</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s2</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(1,</span> <span class="pre">1,</span> <span class="pre">1)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">processor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rapidfuzz.string_metric.levenshtein" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the minimum number of insertions, deletions, and substitutions
required to change one sequence into the other according to Levenshtein with custom
costs for insertion, deletion and substitution</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>s1</strong> (<em>Sequence</em><em>[</em><em>Hashable</em><em>]</em>) – First string to compare.</p></li>
<li><p><strong>s2</strong> (<em>Sequence</em><em>[</em><em>Hashable</em><em>]</em>) – Second string to compare.</p></li>
<li><p><strong>weights</strong> (<em>Tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>] or </em><em>None</em><em>, </em><em>optional</em>) – The weights for the three operations in the form
(insertion, deletion, substitution). Default is (1, 1, 1),
which gives all three operations a weight of 1.</p></li>
<li><p><strong>processor</strong> (<em>callable</em><em>, </em><em>optional</em>) – Optional callable that is used to preprocess the strings before
comparing them. Default is None, which deactivates this behaviour.</p></li>
<li><p><strong>max</strong> (<em>int</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – Maximum distance between s1 and s2, that is
considered as a result. If the distance is bigger than max,
max + 1 is returned instead. Default is None, which deactivates
this behaviour.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>distance</strong> – distance between s1 and s2</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If unsupported weights are provided a ValueError is thrown</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Depending on the input parameters different optimized implementation are used
to improve the performance.</p>
<dl class="simple">
<dt>Insertion = Deletion = Substitution:</dt><dd><p>This is known as uniform Levenshtein distance and is the distance most commonly
referred to as Levenshtein distance. The following implementation is used
with a worst-case performance of <code class="docutils literal notranslate"><span class="pre">O([N/64]M)</span></code>.</p>
<ul class="simple">
<li><p>if max is 0 the similarity can be calculated using a direct comparision,
since no difference between the strings is allowed.  The time complexity of
this algorithm is <code class="docutils literal notranslate"><span class="pre">O(N)</span></code>.</p></li>
<li><p>A common prefix/suffix of the two compared strings does not affect
the Levenshtein distance, so the affix is removed before calculating the
similarity.</p></li>
<li><p>If max is ≤ 3 the mbleven algorithm is used. This algorithm
checks all possible edit operations that are possible under
the threshold <cite>max</cite>. The time complexity of this algorithm is <code class="docutils literal notranslate"><span class="pre">O(N)</span></code>.</p></li>
<li><p>If the length of the shorter string is ≤ 64 after removing the common affix
Hyyrös’ algorithm is used, which calculates the Levenshtein distance in
parallel. The algorithm is described by <a class="footnote-reference brackets" href="#id6" id="id1">1</a>. The time complexity of this
algorithm is <code class="docutils literal notranslate"><span class="pre">O(N)</span></code>.</p></li>
<li><p>If the length of the shorter string is ≥ 64 after removing the common affix
a blockwise implementation of Myers’ algorithm is used, which calculates
the Levenshtein distance in parallel (64 characters at a time).
The algorithm is described by <a class="footnote-reference brackets" href="#id8" id="id2">3</a>. The time complexity of this
algorithm is <code class="docutils literal notranslate"><span class="pre">O([N/64]M)</span></code>.</p></li>
</ul>
</dd>
</dl>
<p>The following image shows a benchmark of the Levenshtein distance in multiple
Python libraries. All of them are implemented either in C/C++ or Cython.
The graph shows, that python-Levenshtein is the only library with a time
complexity of <code class="docutils literal notranslate"><span class="pre">O(NM)</span></code>, while all other libraries have a time complexity of
<code class="docutils literal notranslate"><span class="pre">O([N/64]M)</span></code>. Especially for long strings RapidFuzz is a lot faster than
all the other tested libraries.</p>
<img alt="../_images/uniform_levenshtein1.svg" src="../_images/uniform_levenshtein1.svg"/><dl class="simple">
<dt>Insertion = Deletion, Substitution &gt;= Insertion + Deletion:</dt><dd><p>Since every Substitution can be performed as Insertion + Deletion, this variant
of the Levenshtein distance only uses Insertions and Deletions. Therefore this
variant is often referred to as InDel-Distance.  The following implementation
is used with a worst-case performance of <code class="docutils literal notranslate"><span class="pre">O([N/64]M)</span></code>.</p>
<ul class="simple">
<li><p>if max is 0 the similarity can be calculated using a direct comparision,
since no difference between the strings is allowed.  The time complexity of
this algorithm is <code class="docutils literal notranslate"><span class="pre">O(N)</span></code>.</p></li>
<li><p>if max is 1 and the two strings have a similar length, the similarity can be
calculated using a direct comparision aswell, since a substitution would cause
a edit distance higher than max. The time complexity of this algorithm
is <code class="docutils literal notranslate"><span class="pre">O(N)</span></code>.</p></li>
<li><p>A common prefix/suffix of the two compared strings does not affect
the Levenshtein distance, so the affix is removed before calculating the
similarity.</p></li>
<li><p>If max is ≤ 4 the mbleven algorithm is used. This algorithm
checks all possible edit operations that are possible under
the threshold <cite>max</cite>. As a difference to the normal Levenshtein distance this
algorithm can even be used up to a threshold of 4 here, since the higher weight
of substitutions decreases the amount of possible edit operations.
The time complexity of this algorithm is <code class="docutils literal notranslate"><span class="pre">O(N)</span></code>.</p></li>
<li><p>If the length of the shorter string is ≤ 64 after removing the common affix
Hyyrös’ lcs algorithm is used, which calculates the InDel distance in
parallel. The algorithm is described by <a class="footnote-reference brackets" href="#id9" id="id3">4</a> and is extended with support
for UTF32 in this implementation. The time complexity of this
algorithm is <code class="docutils literal notranslate"><span class="pre">O(N)</span></code>.</p></li>
<li><p>If the length of the shorter string is ≥ 64 after removing the common affix
a blockwise implementation of the Hyyrös’ lcs algorithm is used, which calculates
the Levenshtein distance in parallel (64 characters at a time).
The algorithm is described by <a class="footnote-reference brackets" href="#id9" id="id4">4</a>. The time complexity of this
algorithm is <code class="docutils literal notranslate"><span class="pre">O([N/64]M)</span></code>.</p></li>
</ul>
</dd>
</dl>
<p>The following image shows a benchmark of the InDel distance in RapidFuzz
and python-Levenshtein. Similar to the normal Levenshtein distance
python-Levenshtein uses a implementation with a time complexity of <code class="docutils literal notranslate"><span class="pre">O(NM)</span></code>,
while RapidFuzz has a time complexity of <code class="docutils literal notranslate"><span class="pre">O([N/64]M)</span></code>.</p>
<img alt="../_images/indel_levenshtein1.svg" src="../_images/indel_levenshtein1.svg"/><dl class="simple">
<dt>Other weights:</dt><dd><p>The implementation for other weights is based on Wagner-Fischer.
It has a performance of <code class="docutils literal notranslate"><span class="pre">O(N</span> <span class="pre">*</span> <span class="pre">M)</span></code> and has a memory usage of <code class="docutils literal notranslate"><span class="pre">O(N)</span></code>.
Further details can be found in <a class="footnote-reference brackets" href="#id7" id="id5">2</a>.</p>
</dd>
</dl>
<p class="rubric">References</p>
<dl class="footnote brackets">
<dt class="label" id="id6"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>Hyyrö, Heikki. “A Bit-Vector Algorithm for Computing
Levenshtein and Damerau Edit Distances.”
Nordic Journal of Computing, Volume 10 (2003): 29-39.</p>
</dd>
<dt class="label" id="id7"><span class="brackets"><a class="fn-backref" href="#id5">2</a></span></dt>
<dd><p>Wagner, Robert &amp; Fischer, Michael
“The String-to-String Correction Problem.”
J. ACM. 21. (1974): 168-173</p>
</dd>
<dt class="label" id="id8"><span class="brackets"><a class="fn-backref" href="#id2">3</a></span></dt>
<dd><p>Myers, Gene. “A fast bit-vector algorithm for approximate
string matching based on dynamic programming.”
Journal of the ACM (JACM) 46.3 (1999): 395-415.</p>
</dd>
<dt class="label" id="id9"><span class="brackets">4</span><span class="fn-backref">(<a href="#id3">1</a>,<a href="#id4">2</a>)</span></dt>
<dd><p>Hyyrö, Heikki. “Bit-Parallel LCS-length Computation Revisited”
Proc. 15th Australasian Workshop on Combinatorial Algorithms (AWOCA 2004).</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Find the Levenshtein distance between two strings:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">rapidfuzz.string_metric</span> <span class="kn">import</span> <span class="n">levenshtein</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">levenshtein</span><span class="p">(</span><span class="s2">"lewenstein"</span><span class="p">,</span> <span class="s2">"levenshtein"</span><span class="p">)</span>
<span class="go">2</span>
</pre></div>
</div>
<p>Setting a maximum distance allows the implementation to select
a more efficient implementation:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">levenshtein</span><span class="p">(</span><span class="s2">"lewenstein"</span><span class="p">,</span> <span class="s2">"levenshtein"</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">2</span>
</pre></div>
</div>
<p>It is possible to select different weights by passing a <cite>weight</cite>
tuple.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">levenshtein</span><span class="p">(</span><span class="s2">"lewenstein"</span><span class="p">,</span> <span class="s2">"levenshtein"</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="go">3</span>
</pre></div>
</div>
</dd></dl>
</section>
<section id="normalized-levenshtein">
<h2>normalized_levenshtein<a class="headerlink" href="#normalized-levenshtein" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="rapidfuzz.string_metric.normalized_levenshtein">
<span class="sig-prename descclassname"><span class="pre">rapidfuzz.string_metric.</span></span><span class="sig-name descname"><span class="pre">normalized_levenshtein</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s2</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(1,</span> <span class="pre">1,</span> <span class="pre">1)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">processor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">score_cutoff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rapidfuzz.string_metric.normalized_levenshtein" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates a normalized levenshtein distance using custom
costs for insertion, deletion and substitution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>s1</strong> (<em>Sequence</em><em>[</em><em>Hashable</em><em>]</em>) – First string to compare.</p></li>
<li><p><strong>s2</strong> (<em>Sequence</em><em>[</em><em>Hashable</em><em>]</em>) – Second string to compare.</p></li>
<li><p><strong>weights</strong> (<em>Tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>, </em><em>int</em><em>] or </em><em>None</em><em>, </em><em>optional</em>) – The weights for the three operations in the form
(insertion, deletion, substitution). Default is (1, 1, 1),
which gives all three operations a weight of 1.</p></li>
<li><p><strong>processor</strong> (<em>callable</em><em>, </em><em>optional</em>) – Optional callable that is used to preprocess the strings before
comparing them. Default is None, which deactivates this behaviour.</p></li>
<li><p><strong>score_cutoff</strong> (<em>float</em><em>, </em><em>optional</em>) – Optional argument for a score threshold as a float between 0 and 100.
For ratio &lt; score_cutoff 0 is returned instead. Default is 0,
which deactivates this behaviour.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>similarity</strong> – similarity between s1 and s2 as a float between 0 and 100</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If unsupported weights are provided a ValueError is thrown</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#rapidfuzz.string_metric.levenshtein" title="rapidfuzz.string_metric.levenshtein"><code class="xref py py-obj docutils literal notranslate"><span class="pre">levenshtein</span></code></a></dt><dd><p>Levenshtein distance</p>
</dd>
</dl>
</div>
<p class="rubric">Notes</p>
<p>The normalization of the Levenshtein distance is performed in the following way:</p>
<div class="math-wrapper"><div class="math notranslate nohighlight">
\begin{align*}
  dist_{max} &amp;= \begin{cases}
    min(len(s1), len(s2)) \cdot sub,       &amp; \text{if } sub \leq ins + del \\
    len(s1) \cdot del + len(s2) \cdot ins, &amp; \text{otherwise}
  \end{cases}\\[10pt]

  dist_{max} &amp;= \begin{cases}
    dist_{max} + (len(s1) - len(s2)) \cdot del, &amp; \text{if } len(s1) &gt; len(s2) \\
    dist_{max} + (len(s2) - len(s1)) \cdot ins, &amp; \text{if } len(s1) &lt; len(s2) \\
    dist_{max},                                 &amp; \text{if } len(s1) = len(s2)
  \end{cases}\\[10pt]

  ratio &amp;= 100 \cdot \frac{distance(s1, s2)}{dist_{max}}
\end{align*}</div></div><p class="rubric">Examples</p>
<p>Find the normalized Levenshtein distance between two strings:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">rapidfuzz.string_metric</span> <span class="kn">import</span> <span class="n">normalized_levenshtein</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">normalized_levenshtein</span><span class="p">(</span><span class="s2">"lewenstein"</span><span class="p">,</span> <span class="s2">"levenshtein"</span><span class="p">)</span>
<span class="go">81.81818181818181</span>
</pre></div>
</div>
<p>Setting a score_cutoff allows the implementation to select
a more efficient implementation:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">normalized_levenshtein</span><span class="p">(</span><span class="s2">"lewenstein"</span><span class="p">,</span> <span class="s2">"levenshtein"</span><span class="p">,</span> <span class="n">score_cutoff</span><span class="o">=</span><span class="mi">85</span><span class="p">)</span>
<span class="go">0.0</span>
</pre></div>
</div>
<p>It is possible to select different weights by passing a <cite>weight</cite>
tuple.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">normalized_levenshtein</span><span class="p">(</span><span class="s2">"lewenstein"</span><span class="p">,</span> <span class="s2">"levenshtein"</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="go">85.71428571428571</span>
</pre></div>
</div>
<blockquote>
<div><p>When a different processor is used s1 and s2 do not have to be strings</p>
</div></blockquote>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">normalized_levenshtein</span><span class="p">([</span><span class="s2">"lewenstein"</span><span class="p">],</span> <span class="p">[</span><span class="s2">"levenshtein"</span><span class="p">],</span> <span class="n">processor</span><span class="o">=</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="go">81.81818181818181</span>
</pre></div>
</div>
</dd></dl>
</section>
<section id="hamming">
<h2>hamming<a class="headerlink" href="#hamming" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="rapidfuzz.string_metric.hamming">
<span class="sig-prename descclassname"><span class="pre">rapidfuzz.string_metric.</span></span><span class="sig-name descname"><span class="pre">hamming</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s2</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">processor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rapidfuzz.string_metric.hamming" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the Hamming distance between two strings.
The hamming distance is defined as the number of positions
where the two strings differ. It describes the minimum
amount of substitutions required to transform s1 into s2.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>s1</strong> (<em>Sequence</em><em>[</em><em>Hashable</em><em>]</em>) – First string to compare.</p></li>
<li><p><strong>s2</strong> (<em>Sequence</em><em>[</em><em>Hashable</em><em>]</em>) – Second string to compare.</p></li>
<li><p><strong>processor</strong> (<em>callable</em><em>, </em><em>optional</em>) – Optional callable that is used to preprocess the strings before
comparing them. Default is None, which deactivates this behaviour.</p></li>
<li><p><strong>max</strong> (<em>int</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – Maximum distance between s1 and s2, that is
considered as a result. If the distance is bigger than max,
max + 1 is returned instead. Default is None, which deactivates
this behaviour.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>distance</strong> – distance between s1 and s2</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If s1 and s2 have a different length</p>
</dd>
</dl>
</dd></dl>
</section>
<section id="normalized-hamming">
<h2>normalized_hamming<a class="headerlink" href="#normalized-hamming" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="rapidfuzz.string_metric.normalized_hamming">
<span class="sig-prename descclassname"><span class="pre">rapidfuzz.string_metric.</span></span><span class="sig-name descname"><span class="pre">normalized_hamming</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s2</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">processor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">score_cutoff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rapidfuzz.string_metric.normalized_hamming" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates a normalized hamming distance</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>s1</strong> (<em>Sequence</em><em>[</em><em>Hashable</em><em>]</em>) – First string to compare.</p></li>
<li><p><strong>s2</strong> (<em>Sequence</em><em>[</em><em>Hashable</em><em>]</em>) – Second string to compare.</p></li>
<li><p><strong>processor</strong> (<em>callable</em><em>, </em><em>optional</em>) – Optional callable that is used to preprocess the strings before
comparing them. Default is None, which deactivates this behaviour.</p></li>
<li><p><strong>score_cutoff</strong> (<em>float</em><em>, </em><em>optional</em>) – Optional argument for a score threshold as a float between 0 and 100.
For ratio &lt; score_cutoff 0 is returned instead. Default is 0,
which deactivates this behaviour.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>similarity</strong> – similarity between s1 and s2 as a float between 0 and 100</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If s1 and s2 have a different length</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#rapidfuzz.string_metric.hamming" title="rapidfuzz.string_metric.hamming"><code class="xref py py-obj docutils literal notranslate"><span class="pre">hamming</span></code></a></dt><dd><p>Hamming distance</p>
</dd>
</dl>
</div>
</dd></dl>
</section>
<section id="jaro-similarity">
<h2>jaro_similarity<a class="headerlink" href="#jaro-similarity" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="rapidfuzz.string_metric.jaro_similarity">
<span class="sig-prename descclassname"><span class="pre">rapidfuzz.string_metric.</span></span><span class="sig-name descname"><span class="pre">jaro_similarity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s2</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">processor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">score_cutoff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rapidfuzz.string_metric.jaro_similarity" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the jaro similarity</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>s1</strong> (<em>Sequence</em><em>[</em><em>Hashable</em><em>]</em>) – First string to compare.</p></li>
<li><p><strong>s2</strong> (<em>Sequence</em><em>[</em><em>Hashable</em><em>]</em>) – Second string to compare.</p></li>
<li><p><strong>processor</strong> (<em>callable</em><em>, </em><em>optional</em>) – Optional callable that is used to preprocess the strings before
comparing them. Default is None, which deactivates this behaviour.</p></li>
<li><p><strong>score_cutoff</strong> (<em>float</em><em>, </em><em>optional</em>) – Optional argument for a score threshold as a float between 0 and 100.
For ratio &lt; score_cutoff 0 is returned instead. Default is 0,
which deactivates this behaviour.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>similarity</strong> – similarity between s1 and s2 as a float between 0 and 100</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>
</section>
<section id="jaro-winkler-similarity">
<h2>jaro_winkler_similarity<a class="headerlink" href="#jaro-winkler-similarity" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="rapidfuzz.string_metric.jaro_winkler_similarity">
<span class="sig-prename descclassname"><span class="pre">rapidfuzz.string_metric.</span></span><span class="sig-name descname"><span class="pre">jaro_winkler_similarity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s2</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix_weight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">processor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">score_cutoff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#rapidfuzz.string_metric.jaro_winkler_similarity" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the jaro winkler similarity</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>s1</strong> (<em>Sequence</em><em>[</em><em>Hashable</em><em>]</em>) – First string to compare.</p></li>
<li><p><strong>s2</strong> (<em>Sequence</em><em>[</em><em>Hashable</em><em>]</em>) – Second string to compare.</p></li>
<li><p><strong>prefix_weight</strong> (<em>float</em><em>, </em><em>optional</em>) – Weight used for the common prefix of the two strings.
Has to be between 0 and 0.25. Default is 0.1.</p></li>
<li><p><strong>processor</strong> (<em>callable</em><em>, </em><em>optional</em>) – Optional callable that is used to preprocess the strings before
comparing them. Default is None, which deactivates this behaviour.</p></li>
<li><p><strong>score_cutoff</strong> (<em>float</em><em>, </em><em>optional</em>) – Optional argument for a score threshold as a float between 0 and 100.
For ratio &lt; score_cutoff 0 is returned instead. Default is 0,
which deactivates this behaviour.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>similarity</strong> – similarity between s1 and s2 as a float between 0 and 100</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If prefix_weight is invalid</p>
</dd>
</dl>
</dd></dl>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="utils.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">rapidfuzz.utils</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="fuzz.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">rapidfuzz.fuzz</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2021, Max Bachmann |
          Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
          <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            | <a class="muted-link" href="../_sources/Usage/string_metric.rst.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">rapidfuzz.string_metric</a><ul>
<li><a class="reference internal" href="#levenshtein">levenshtein</a></li>
<li><a class="reference internal" href="#normalized-levenshtein">normalized_levenshtein</a></li>
<li><a class="reference internal" href="#hamming">hamming</a></li>
<li><a class="reference internal" href="#normalized-hamming">normalized_hamming</a></li>
<li><a class="reference internal" href="#jaro-similarity">jaro_similarity</a></li>
<li><a class="reference internal" href="#jaro-winkler-similarity">jaro_winkler_similarity</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    </body>
</html>